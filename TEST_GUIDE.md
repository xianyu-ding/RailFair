# ğŸ§ª æµ‹è¯•æŒ‡å—

## æµ‹è¯•æ–°åŠŸèƒ½ï¼šç¥¨ä»·æ˜¾ç¤ºå’Œä¸­é—´ç«™å°

### æ­¥éª¤ 1: é‡å¯ API æœåŠ¡å™¨

```bash
# å¦‚æœæœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼Œå…ˆåœæ­¢ (Ctrl+C)
# ç„¶åé‡æ–°å¯åŠ¨
python3 -m api.app
# æˆ–
./start_api.sh
```

ç­‰å¾…çœ‹åˆ°ï¼š
```
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

### æ­¥éª¤ 2: æµ‹è¯• API ç«¯ç‚¹

#### 2.1 æµ‹è¯•é¢„æµ‹APIï¼ˆåŒ…å«ç¥¨ä»·ï¼‰

```bash
curl -X POST http://localhost:8000/api/predict \
  -H "Content-Type: application/json" \
  -d '{
    "origin": "EUS",
    "destination": "MAN",
    "departure_date": "2025-12-25",
    "departure_time": "09:30",
    "include_fares": true
  }' | python3 -m json.tool
```

**éªŒè¯ç‚¹**ï¼š
- âœ… è¿”å›é¢„æµ‹æ•°æ®
- âœ… ç¥¨ä»·æ•°æ®ä¸­ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®åº”è¯¥æ˜¾ç¤º `null` è€Œä¸æ˜¯å­—ç¬¦ä¸²
- âœ… æ£€æŸ¥ `fares.advance`, `fares.off_peak`, `fares.anytime` çš„å€¼

#### 2.2 æµ‹è¯•ä¸­é—´ç«™å°API

```bash
curl http://localhost:8000/api/routes/EUS/MAN/stops | python3 -m json.tool
```

**éªŒè¯ç‚¹**ï¼š
- âœ… è¿”å› `stops` æ•°ç»„
- âœ… æ¯ä¸ªç«™å°åŒ…å« `location`, `location_name`, `scheduled_departure`, `scheduled_arrival`
- âœ… ç«™å°æŒ‰æ—¶é—´é¡ºåºæ’åˆ—

### æ­¥éª¤ 3: æµ‹è¯•å‰ç«¯åŠŸèƒ½

#### 3.1 å¯åŠ¨å‰ç«¯æœåŠ¡å™¨

```bash
cd frontend/railfair
python3 -m http.server 3000
```

æˆ–è€…ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š
```bash
./start_frontend.sh
```

#### 3.2 åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•

1. **æ‰“å¼€å‰ç«¯é¡µé¢**ï¼š
   ```
   http://localhost:3000
   ```

2. **æµ‹è¯•æŸ¥è¯¢**ï¼š
   - èµ·ç‚¹ç«™ï¼š`EUS` (London Euston)
   - ç»ˆç‚¹ç«™ï¼š`MAN` (Manchester Piccadilly)
   - æ—¥æœŸå’Œæ—¶é—´ï¼šé€‰æ‹©æœªæ¥æ—¥æœŸå’Œæ—¶é—´
   - ç‚¹å‡»æœç´¢

3. **éªŒè¯ç¥¨ä»·æ˜¾ç¤º**ï¼š
   - âœ… å¦‚æœæœ‰æ•°æ®ï¼Œæ˜¾ç¤ºä»·æ ¼ï¼ˆå¦‚ `Â£42.90`ï¼‰
   - âœ… å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œæ˜¾ç¤º `-`ï¼ˆè€Œä¸æ˜¯ "Unavailable"ï¼‰

4. **æµ‹è¯•ä¸­é—´ç«™å°åŠŸèƒ½**ï¼š
   - âœ… åœ¨ç»“æœå¡ç‰‡ä¸­æ‰¾åˆ°"æŸ¥çœ‹ä¸­é—´ç«™å°"æŒ‰é’®
   - âœ… ç‚¹å‡»æŒ‰é’®
   - âœ… åº”è¯¥å±•å¼€æ˜¾ç¤ºä¸­é—´ç«™å°åˆ—è¡¨
   - âœ… æ¯ä¸ªç«™å°æ˜¾ç¤ºåç§°ã€ä»£ç å’Œé¢„è®¡æ—¶é—´
   - âœ… èµ·ç‚¹å’Œç»ˆç‚¹ç«™ç”¨è“è‰²èƒŒæ™¯é«˜äº®

### æ­¥éª¤ 4: æµ‹è¯•ä¸åŒè·¯çº¿

æµ‹è¯•ä¸åŒè·¯çº¿ï¼ŒéªŒè¯æ•°æ®æ˜¯å¦æ­£ç¡®ï¼š

```bash
# æµ‹è¯• EUS -> BHM
curl -X POST http://localhost:8000/api/predict \
  -H "Content-Type: application/json" \
  -d '{
    "origin": "EUS",
    "destination": "BHM",
    "departure_date": "2025-12-25",
    "departure_time": "09:30",
    "include_fares": true
  }' | python3 -m json.tool

# æµ‹è¯•ä¸­é—´ç«™å°
curl http://localhost:8000/api/routes/EUS/BHM/stops | python3 -m json.tool
```

### æ­¥éª¤ 5: æµ‹è¯•è¾¹ç•Œæƒ…å†µ

#### 5.1 æµ‹è¯•æ²¡æœ‰ç¥¨ä»·æ•°æ®çš„è·¯çº¿

```bash
# æŸ¥è¯¢ä¸€ä¸ªå¯èƒ½æ²¡æœ‰ç¥¨ä»·æ•°æ®çš„è·¯çº¿
curl -X POST http://localhost:8000/api/predict \
  -H "Content-Type: application/json" \
  -d '{
    "origin": "XXX",
    "destination": "YYY",
    "departure_date": "2025-12-25",
    "departure_time": "09:30",
    "include_fares": true
  }' | python3 -m json.tool
```

**éªŒè¯**ï¼šç¥¨ä»·åº”è¯¥è¿”å› `null` æˆ–æ‰€æœ‰å­—æ®µä¸º `null`

#### 5.2 æµ‹è¯•æ²¡æœ‰ä¸­é—´ç«™å°æ•°æ®çš„è·¯çº¿

```bash
curl http://localhost:8000/api/routes/XXX/YYY/stops | python3 -m json.tool
```

**éªŒè¯**ï¼šåº”è¯¥è¿”å›ç©ºæ•°ç»„æˆ–å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: API è¿”å› 500 é”™è¯¯

**æ£€æŸ¥**ï¼š
- API æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
- æ•°æ®åº“æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`ls -lh data/railfair.db`
- æŸ¥çœ‹ API æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 2: å‰ç«¯æ— æ³•åŠ è½½ä¸­é—´ç«™å°

**æ£€æŸ¥**ï¼š
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
- æŸ¥çœ‹ Console æ ‡ç­¾é¡µçš„é”™è¯¯ä¿¡æ¯
- æŸ¥çœ‹ Network æ ‡ç­¾é¡µï¼Œæ£€æŸ¥ API è¯·æ±‚æ˜¯å¦æˆåŠŸ

### é—®é¢˜ 3: ç¥¨ä»·æ˜¾ç¤ºä¸æ­£ç¡®

**æ£€æŸ¥**ï¼š
- æ•°æ®åº“æ˜¯å¦æœ‰ç¥¨ä»·æ•°æ®ï¼š
  ```bash
  sqlite3 data/railfair.db "SELECT origin, destination, ticket_type, adult_fare FROM fare_cache WHERE origin='EUS' AND destination='MAN' LIMIT 5;"
  ```
- æ£€æŸ¥å‰ç«¯ `formatCurrency` å‡½æ•°æ˜¯å¦æ­£ç¡®ä¿®æ”¹

### é—®é¢˜ 4: ä¸­é—´ç«™å°æ•°æ®ä¸ºç©º

**æ£€æŸ¥**ï¼š
- æ•°æ®åº“æ˜¯å¦æœ‰ä¸­é—´ç«™å°æ•°æ®ï¼š
  ```bash
  sqlite3 data/railfair.db "SELECT COUNT(*) FROM hsp_service_details WHERE location IN ('EUS', 'MAN');"
  ```
- æ£€æŸ¥ API ç«¯ç‚¹æ˜¯å¦æ­£ç¡®å®ç°

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] API æœåŠ¡å™¨æˆåŠŸå¯åŠ¨
- [ ] é¢„æµ‹ API è¿”å›æ­£ç¡®æ•°æ®
- [ ] ç¥¨ä»· API è¿”å›æ­£ç¡®æ•°æ®ï¼ˆnull æˆ–ä»·æ ¼ï¼‰
- [ ] ä¸­é—´ç«™å° API è¿”å›æ­£ç¡®æ•°æ®
- [ ] å‰ç«¯é¡µé¢å¯ä»¥æ­£å¸¸æ‰“å¼€
- [ ] å‰ç«¯æŸ¥è¯¢åŠŸèƒ½æ­£å¸¸
- [ ] ç¥¨ä»·æ˜¾ç¤ºæ­£ç¡®ï¼ˆæœ‰æ•°æ®æ˜¾ç¤ºä»·æ ¼ï¼Œæ— æ•°æ®æ˜¾ç¤º "-"ï¼‰
- [ ] ä¸­é—´ç«™å°æŒ‰é’®å¯ä»¥ç‚¹å‡»
- [ ] ä¸­é—´ç«™å°åˆ—è¡¨æ­£ç¡®å±•å¼€
- [ ] ä¸­é—´ç«™å°æ•°æ®æ˜¾ç¤ºæ­£ç¡®ï¼ˆç«™åã€æ—¶é—´ç­‰ï¼‰
- [ ] ä¸åŒè·¯çº¿è¿”å›ä¸åŒæ•°æ®

## ğŸ“ æµ‹è¯•ç»“æœè®°å½•

è®°å½•æµ‹è¯•ç»“æœï¼ŒåŒ…æ‹¬ï¼š
- æµ‹è¯•çš„è·¯çº¿
- ç¥¨ä»·æ•°æ®æ˜¯å¦æ­£ç¡®
- ä¸­é—´ç«™å°æ•°æ®æ˜¯å¦æ­£ç¡®
- å‘ç°çš„é—®é¢˜

